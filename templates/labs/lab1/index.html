{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}
{% load static %}
{% block content %}
<h2>{{ title }}</h2>

<div class="tab-container">
    <div class="tabs">
        <button class="tab-btn active" data-tab="generate">Генерація</button>
        <button class="tab-btn" data-tab="period">Період</button>
        <button class="tab-btn" data-tab="cesaro">Тест Чезаро</button>
        <button class="tab-btn" data-tab="random">Тести випадковості</button>
    </div>

    <!-- Вкладка генерації -->
    <div id="generate" class="tab-content active">
        <div class="section">
            <h3>Параметри генератора</h3>
            <div class="grid">
                <div class="form-group">
                    <label>Модуль (m):</label>
                    <input type="number" id="gen-m" value="{{ config.m }}"  placeholder="{{ config.m }}"  min="1">
                </div>
                <div class="form-group">
                    <label>Множник (a):</label>
                    <input type="number" id="gen-a" value="{{ config.a }}" placeholder="{{ config.a }}" min="0">
                </div>
                <div class="form-group">
                    <label>Приріст (c):</label>
                    <input type="number" id="gen-c" value="{{ config.c }}" placeholder="{{ config.c }}"min="0">
                </div>
                <div class="form-group">
                    <label>Початкове значення X_0:</label>
                    <input type="number" id="gen-x0" value="{{ config.x0 }}" placeholder="{{ config.xo }} "min="0">
                </div>
                <div class="form-group">
                    <label>Кількість чисел:</label>
                    <input type="number" id="gen-count" value="100" min="1">
                </div>
            </div>
            <button class="btn" onclick="generateNumbers()">Згенерувати</button>
            <button class="btn btn-success" onclick="exportResults()" type="file">Завантажити в txt файл</button>
        </div>

        <div id="gen-results" style="display: none;">
            <div class="results-container">
                <h3>Результати генерації</h3>
                <div class="grid" id="gen-stats"></div>
                <div style="margin-top: 20px;">
                    <h4>Згенерована послідовність: <span id="sequence-info" style="font-weight: normal; font-size: 0.9em;"></span></h4>
                    <div id="gen-sequence" style="max-height: 200px; overflow-y: auto; padding: 10px; background: #f9fafb; border-radius: 8px; margin-top: 10px; word-break: break-all;"></div>
                    <div id="pagination-controls" style="margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap;">
                        <!-- Кнопки пагінації будуть вставлені тут -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Вкладка тестування періоду -->
    <div id="period" class="tab-content">
        <div class="section">
            <h3>Тестування періоду генератора</h3>
            <p style="margin: 15px 0; color: #6b7280;">
                Період генератора - це кількість чисел до початку повторення послідовності.
                Для надійного генератора період повинен бути близьким до максимально можливого.
            </p>
            <button class="btn" onclick="testPeriod()">Знайти період</button>
        </div>

        <div id="period-results" style="display: none;">
            <div class="results-container">
                <h3>Результати аналізу періоду</h3>
                <div id="period-stats"></div>
            </div>
        </div>
    </div>

    <!-- Вкладка тесту Чезаро -->
    <div id="cesaro" class="tab-content">
        <div class="section">
            <h3>Тест Чезаро для оцінки Pi</h3>
            <p style="margin: 15px 0; color: #6b7280;">
                За теоремою Чезаро, ймовірність того, що найбільш спільний дільник (gcd) двох випадкових чисел дорівнює 1, становить 6/Pi^2.
                Це дозволяє оцінити якість генератора через точність визначення Pi.
            </p>
            <div class="form-group" style="max-width: 300px;">
                <label>Кількість пар для тестування:</label>
                <input type="number" id="cesaro-pairs" value="10000" min="100" max="100000000">
            </div>
            <button class="btn" onclick="testCesaro()">Запустити перевірку</button>
        </div>

        <div id="cesaro-results" style="display: none;">
            <div class="results-container">
                <h3>Результати тесту Чезаро</h3>
                <div id="cesaro-stats"></div>
            </div>
        </div>
    </div>

    <!-- Вкладка тестів випадковості -->
    <div id="random" class="tab-content">
        <div class="section">
            <h3>Статистичні тести випадковості</h3>
            <p style="margin: 15px 0; color: #6b7280;">
                Комплексне тестування включає частотний тест та тест послідовностей
                для перевірки статистичних властивостей згенерованої послідовності.
            </p>
            <div class="form-group" style="max-width: 300px;">
                <label>Розмір вибірки:</label>
                <input type="number" id="random-count" value="1000" min="100" max="100000000">
            </div>
            <button class="btn" onclick="testRandomness()">Запустити перевірки</button>
        </div>

        <div id="random-results" style="display: none;">
            <div class="results-container">
                <h3>Результати тестування випадковості</h3>
                <div id="random-stats"></div>
            </div>
        </div>
    </div>
</div>
    
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/ЛР1/lr1_JS.js' %}"></script>
{% endblock %}